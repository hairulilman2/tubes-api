<!doctype html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>absensi untad - Sistem Absensi</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body class="login-mode">
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="header">
            <svg width="80" height="80" viewBox="0 0 80 80" class="logo-img">
                <circle cx="40" cy="40" r="40" fill="url(#gradient)" />
                <text
                    x="40"
                    y="45"
                    text-anchor="middle"
                    fill="white"
                    font-family="Arial"
                    font-size="14"
                    font-weight="bold"
                >
                    LOGO
                </text>
                <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color: #2c5e2e; stop-opacity: 1" />
                        <stop offset="100%" style="stop-color: #4a7c59; stop-opacity: 1" />
                    </linearGradient>
                </defs>
            </svg>
            <h1 class="title">ABSENSI</h1>
            <p class="subtitle">Universitas</p>
        </div>

        <form id="loginForm">
            <div class="form-group">
                <label for="username" id="usernameLabel">NIM..</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    placeholder="Masukkan NIM"
                    required
                />
            </div>

            <div class="form-group">
                <label for="password">password..</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Masukkan password"
                    required
                />
            </div>

            <div class="form-group">
                <label for="role">login sebagai:</label>
                <select id="role" name="role" onchange="updateUsernameLabel()">
                    <option value="mahasiswa">Mahasiswa</option>
                    <option value="dosen">Dosen</option>
                </select>
            </div>

            <button type="submit" class="login-button">LOGIN</button>
        </form>

        <div id="loginResult" class="result"></div>
        <p><small>Jika masih bermasalah, hubungi admin untuk reset password.</small></p>
    </div>

    <!-- Main Application -->
    <div class="main-app" id="mainApp">
        <div class="container">
            <div class="app-header">
                <button class="logout-btn" onclick="logout()">Logout</button>
                <h1>ğŸ“ Sistem Absensi CERDAS UNTAD</h1>
                <p>Berbasis Lokasi dengan AdonisJS & MongoDB Atlas</p>
            </div>

            <div class="content">
                <div class="tabs">
                    <button class="tab" onclick="showTab('absenPeta')" id="absenPetaTab" style="display: none">
                        Absensi
                    </button>
                    <button class="tab" onclick="showTab('zoomMahasiswa')" id="zoomMahasiswaTab" style="display: none">
                        Join Zoom
                    </button>
                    <button class="tab" onclick="showTab('admin')" id="adminTab" style="display: none">
                        Admin Panel
                    </button>
                    <button class="tab" onclick="showTab('dosen')" id="dosenTab" style="display: none">
                        Panel Dosen
                    </button>
                    <button class="tab" onclick="showTab('zoom')" id="zoomTab" style="display: none">
                        Zoom Meeting
                    </button>
                </div>

                <!-- Absen dengan Peta Tab -->
                <div id="absenPeta" class="tab-content">
                    <h3>ğŸ“ Absensi Mahasiswa</h3>
                    
                    <div class="peta-container">
                        <div class="map-section">
                            <div id="map"></div>
                        </div>

                        <div class="peta-sidebar">
                            <div class="info-card">
                                <h4>ğŸ‘¤ Data Mahasiswa</h4>
                                <div class="form-group">
                                    <label>Nama:</label>
                                    <input type="text" id="mahasiswaName" placeholder="Masukkan nama lengkap" required />
                                </div>
                                <div class="form-group">
                                    <label>NIM:</label>
                                    <input type="text" id="mahasiswaNIM" placeholder="Masukkan NIM" required />
                                </div>
                                <div class="form-group">
                                    <label>Kelas:</label>
                                    <select id="mahasiswaKelas" required>
                                        <option value="">Pilih Kelas</option>
                                        <option value="TI A">TI A</option>
                                        <option value="TI B">TI B</option>
                                        <option value="TI C">TI C</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Mata Kuliah:</label>
                                    <select id="mahasiswaMatkul" required>
                                        <option value="">Pilih Mata Kuliah</option>
                                        <option value="Pemrograman Web">Pemrograman Web</option>
                                        <option value="Basis Data">Basis Data</option>
                                        <option value="Algoritma dan Struktur Data">Algoritma dan Struktur Data</option>
                                        <option value="Sistem Operasi">Sistem Operasi</option>
                                        <option value="Jaringan Komputer">Jaringan Komputer</option>
                                        <option value="Rekayasa Perangkat Lunak">Rekayasa Perangkat Lunak</option>
                                    </select>
                                </div>
                            </div>

                            <div class="info-card">
                                <h4>ğŸ“ Informasi Lokasi</h4>
                                <div id="location-info">
                                    <p>Mencari lokasi Anda...</p>
                                </div>
                            </div>

                            <div class="info-card">
                                <h4>ğŸ¯ Status Absensi</h4>
                                <div id="attendance-status" class="status luar-radius">
                                    Belum dapat lokasi
                                </div>
                                <div id="distance-info"></div>
                            </div>

                            <div class="info-card">
                                <h4>âš™ï¸ Kontrol</h4>
                                <button id="get-location" class="btn btn-primary">
                                    ğŸ“ Dapatkan Lokasi Saya
                                </button>
                                <button id="absen-peta-btn" class="btn btn-success" disabled>
                                    âœ… ABSEN SEKARANG
                                </button>
                                <button onclick="initMap()" class="btn btn-warning">
                                    ğŸ—ºï¸ Reload Peta
                                </button>
                            </div>

                            <div class="info-card" id="camera-section">
                                <h4>ğŸ“· Foto Absensi</h4>
                                <video id="camera-video" autoplay></video>
                                <canvas id="camera-canvas"></canvas>
                                <div id="photo-preview"></div>
                                <div class="camera-buttons">
                                    <button id="take-photo-btn" class="btn btn-info">ğŸ“¸ Ambil Foto</button>
                                    <button id="retake-photo-btn" class="btn btn-warning">ğŸ”„ Foto Ulang</button>
                                    <button id="confirm-attendance-btn" class="btn btn-success">âœ… Konfirmasi Absen</button>
                                </div>
                            </div>

                            <div class="info-card">
                                <h4>â„¹ï¸ Informasi</h4>
                                <p><strong>Lokasi Absensi:</strong> Ruang Kelas A1</p>
                                <p><strong>Radius:</strong> 5 meter</p>
                                <p><strong>Waktu:</strong> <span id="current-time"></span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Zoom Mahasiswa Tab -->
                <div id="zoomMahasiswa" class="tab-content">
                    <h3>ğŸ“¹ Join Zoom Meeting</h3>
                    
                    <!-- Mahasiswa Info -->
                    <div class="mahasiswa-zoom-info">
                        <h4>ğŸ‘¤ Info Mahasiswa</h4>
                        <p><strong>Nama:</strong> <span id="zoomMahasiswaName">Loading...</span></p>
                        <p><strong>NIM:</strong> <span id="zoomMahasiswaNIM">Loading...</span></p>
                        <p><strong>Status:</strong> <span id="zoomMahasiswaStatus">Belum join meeting</span></p>
                    </div>

                    <!-- Join Meeting -->
                    <div class="join-meeting">
                        <h4>ğŸš€ Join Meeting</h4>
                        <div class="form-group">
                            <label>Meeting ID:</label>
                            <input type="text" id="joinMeetingId" placeholder="Masukkan Meeting ID (contoh: 282 899 2827)" />
                        </div>
                        <div class="form-group">
                            <label>Password (jika ada):</label>
                            <input type="text" id="joinMeetingPassword" placeholder="Masukkan password meeting (opsional)" />
                        </div>
                        <div class="form-group">
                            <label>Nama untuk ditampilkan:</label>
                            <input type="text" id="joinDisplayName" placeholder="Nama Anda di meeting" />
                        </div>
                        <div class="form-group">
                            <label>Kelas:</label>
                            <select id="joinMeetingKelas">
                                <option value="">Pilih Kelas</option>
                                <option value="TI A">TI A</option>
                                <option value="TI B">TI B</option>
                                <option value="TI C">TI C</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="joinZoomMeeting()">ğŸš€ Join Meeting</button>
                        <button class="btn btn-info" onclick="scanQRCode()">ğŸ“± Scan QR Code</button>
                        <div id="joinMeetingResult" class="result"></div>
                    </div>

                    <!-- Active Meeting Info -->
                    <div id="activeMeetingInfo" class="active-meeting-info">
                        <h4>ğŸŸ¢ Meeting Aktif</h4>
                        <p><strong>Meeting ID:</strong> <span id="currentMeetingId"></span></p>
                        <p><strong>Nama:</strong> <span id="currentDisplayName"></span></p>
                        <p><strong>Status:</strong> <span id="currentMeetingStatus">Terhubung</span></p>
                        <p><strong>Durasi:</strong> <span id="meetingDuration">00:00</span></p>
                        <div class="meeting-controls">
                            <button class="btn btn-warning" onclick="leaveMeeting()">ğŸšª Keluar Meeting</button>
                            <button class="btn btn-info" onclick="toggleMute()">ğŸ¤ Mute/Unmute</button>
                        </div>
                    </div>

                    <!-- Meeting History -->
                    <div class="meeting-history-mahasiswa">
                        <h4>ğŸ“œ Riwayat Meeting Saya</h4>
                        <button class="btn btn-secondary" onclick="loadMahasiswaMeetingHistory()">ğŸ”„ Refresh Riwayat</button>
                        <div id="mahasiswaMeetingHistoryList"></div>
                    </div>
                </div>

                <!-- Admin Panel Tab -->
                <div id="admin" class="tab-content">
                    <h3>ğŸ” Admin Panel</h3>

                    <!-- Stats -->
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-number" id="totalUsers">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalDosen">0</div>
                            <div class="stat-label">Total Dosen</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalMahasiswa">0</div>
                            <div class="stat-label">Total Mahasiswa</div>
                        </div>
                    </div>

                    <!-- Admin Tabs -->
                    <div class="admin-tabs">
                        <button class="admin-tab active" onclick="showAdminTab('registerUser')">
                            Daftar User
                        </button>
                        <button class="admin-tab" onclick="showAdminTab('manageUsers')">Kelola User</button>
                    </div>

                    <!-- Register User -->
                    <div id="adminRegisterUser" class="admin-tab-content active">
                        <h4>ğŸ“ Daftarkan User Baru</h4>
                        <form id="adminRegisterForm" class="admin-form">
                            <div class="form-group">
                                <label>Nama:</label>
                                <input type="text" id="adminRegName" required />
                            </div>
                            <div class="form-group">
                                <label id="adminRegEmailLabel">NIM/NIP:</label>
                                <input type="text" id="adminRegEmail" required />
                            </div>
                            <div class="form-group">
                                <label>Password:</label>
                                <input type="password" id="adminRegPassword" required />
                            </div>
                            <div class="form-group">
                                <label>Role:</label>
                                <select id="adminRegRole" onchange="toggleAdminLocationFields()">
                                    <option value="mahasiswa">Mahasiswa</option>
                                    <option value="dosen">Dosen</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Kelas:</label>
                                <select id="adminRegKelas">
                                    <option value="">Pilih Kelas (Opsional)</option>
                                    <option value="TI A">TI A</option>
                                    <option value="TI B">TI B</option>
                                    <option value="TI C">TI C</option>
                                </select>
                            </div>
                            <div id="adminLocationFields" class="location-fields">
                                <div class="info-box">
                                    <h5>â„¹ï¸ Info Dosen</h5>
                                    <p>
                                        <small
                                            >Lokasi akan diatur oleh dosen sendiri setelah login (radius validasi: 5
                                            meter). Admin hanya perlu mendaftarkan akun dosen.</small
                                        >
                                    </p>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Daftarkan User</button>
                        </form>
                        <div id="adminRegisterResult" class="result"></div>
                    </div>

                    <!-- Manage Users -->
                    <div id="adminManageUsers" class="admin-tab-content">
                        <h4>ğŸ‘¥ Kelola User</h4>
                        <button class="btn btn-secondary" onclick="loadAllUsersAdmin()">Refresh Data</button>
                        <div id="adminUsersList" class="users-list"></div>
                    </div>
                </div>

                <!-- Modal Edit User -->
                <div id="editUserModal" class="modal-overlay">
                    <div class="modal-content">
                        <h4>âœï¸ Edit User</h4>
                        <form id="editUserForm">
                            <input type="hidden" id="editUserId" />
                            <div class="form-group">
                                <label>Nama:</label>
                                <input type="text" id="editUserName" required />
                            </div>
                            <div class="form-group">
                                <label>Email/Username:</label>
                                <input type="text" id="editUserEmail" required />
                            </div>
                            <div class="form-group">
                                <label>Role:</label>
                                <select id="editUserRole">
                                    <option value="mahasiswa">Mahasiswa</option>
                                    <option value="dosen">Dosen</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Kelas:</label>
                                <select id="editUserKelas">
                                    <option value="">Pilih Kelas (Opsional)</option>
                                    <option value="TI A">TI A</option>
                                    <option value="TI B">TI B</option>
                                    <option value="TI C">TI C</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Password Baru (kosongkan jika tidak ingin mengubah):</label>
                                <input type="password" id="editUserPassword" placeholder="Masukkan password baru" />
                            </div>
                            <div class="modal-actions">
                                <button type="button" onclick="closeEditModal()" class="btn btn-secondary">Batal</button>
                                <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
                            </div>
                        </form>
                        <div id="editUserResult" class="result"></div>
                    </div>
                </div>

                <!-- Panel Dosen Tab -->
                <div id="dosen" class="tab-content">
                    <h3>ğŸ‘¨â€ğŸ« Panel Dosen</h3>
                    
                    <!-- Dosen Info -->
                    <div class="dosen-info">
                        <h4>ğŸ“‹ Informasi Dosen</h4>
                        <p><strong>Nama:</strong> <span id="dosenName">Loading...</span></p>
                        <p><strong>NIP:</strong> <span id="dosenNIP">Loading...</span></p>
                        <div class="form-group">
                            <label><strong>Kelas:</strong></label>
                            <select id="dosenKelas">
                                <option value="">Pilih Kelas</option>
                                <option value="TI A">TI A</option>
                                <option value="TI B">TI B</option>
                                <option value="TI C">TI C</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><strong>Mata Kuliah:</strong></label>
                            <select id="dosenMatkul">
                                <option value="">Pilih Mata Kuliah</option>
                                <option value="Pemrograman Web">Pemrograman Web</option>
                                <option value="Basis Data">Basis Data</option>
                                <option value="Algoritma dan Struktur Data">Algoritma dan Struktur Data</option>
                                <option value="Sistem Operasi">Sistem Operasi</option>
                                <option value="Jaringan Komputer">Jaringan Komputer</option>
                                <option value="Rekayasa Perangkat Lunak">Rekayasa Perangkat Lunak</option>
                            </select>
                        </div>
                        <p><strong>Status Session:</strong> <span id="sessionStatus">Tidak Aktif</span></p>
                    </div>

                    <!-- Location Setting -->
                    <div class="location-setting">
                        <h4>ğŸ“ Pengaturan Lokasi Ruang Kelas</h4>
                        <div class="form-group">
                            <label>Latitude:</label>
                            <input type="number" id="dosenLat" step="any" placeholder="-0.8415911" />
                        </div>
                        <div class="form-group">
                            <label>Longitude:</label>
                            <input type="number" id="dosenLng" step="any" placeholder="119.8927127" />
                        </div>
                        <div class="location-buttons">
                            <button class="btn btn-info" onclick="getAndSaveDosenLocation()">ğŸ“ Ambil & Simpan Lokasi</button>
                            <button class="btn btn-warning" onclick="shareCurrentLocation()">ğŸ“¤ Share Lokasi</button>
                        </div>
                        <div id="locationResult" class="result"></div>
                        <div id="shareLocation"></div>
                    </div>

                    <!-- Peta Dosen -->
                    <div class="dosen-map">
                        <h4>ğŸ—ºï¸ Peta Lokasi Kelas</h4>
                        <div id="dosenMap"></div>
                        <div class="map-controls">
                            <button onclick="initDosenMap()" class="btn btn-info">ğŸ”„ Refresh Peta</button>
                            <button onclick="centerDosenMap()" class="btn btn-warning">ğŸ¯ Center ke Lokasi</button>
                        </div>
                    </div>

                    <!-- Session Control -->
                    <div class="session-control">
                        <h4>â° Kontrol Session Absensi</h4>
                        <p><small>Session absensi berlangsung selama 15 menit. Mahasiswa hanya bisa absen selama session aktif.</small></p>
                        <button class="btn btn-primary" onclick="startAttendanceSession()">ğŸš€ Mulai Session Absensi</button>
                        <div id="sessionTimer"></div>
                    </div>

                    <!-- Attendance List -->
                    <div class="attendance-list">
                        <h4>ğŸ“Š Daftar Absensi & Riwayat Meeting</h4>
                        <div class="attendance-tabs">
                            <button class="attendance-tab active" onclick="showAttendanceTab('offline')">ğŸ“ Absensi Offline</button>
                            <button class="attendance-tab" onclick="showAttendanceTab('zoom')">ğŸ“¹ Riwayat Zoom</button>
                        </div>
                        <button class="btn btn-secondary" onclick="loadAllAttendanceData()">ğŸ”„ Refresh Semua Data</button>
                        <div id="offlineAttendances" class="attendance-tab-content active">
                            <div id="dosenAttendancesList"></div>
                        </div>
                        <div id="zoomAttendances" class="attendance-tab-content">
                            <div id="meetingHistoryList"></div>
                        </div>
                    </div>
                </div>

                <!-- Zoom Meeting Tab -->
                <div id="zoom" class="tab-content">
                    <h3>ğŸ“¹ Zoom Meeting & Auto Attendance</h3>
                    
                    <!-- Zoom Meeting Info -->
                    <div class="zoom-info">
                        <h4>ğŸ“Š Info Meeting</h4>
                        <p><strong>Dosen:</strong> <span id="zoomDosenName">Loading...</span></p>
                        <p><strong>Mata Kuliah:</strong> <span id="zoomMatkul">Belum dipilih</span></p>
                        <p><strong>Status Meeting:</strong> <span id="zoomStatus">Tidak Aktif</span></p>
                    </div>

                    <!-- Create Meeting -->
                    <div class="create-meeting">
                        <div class="demo-warning">
                            <strong>âš ï¸ PENTING - DEMO MODE</strong><br>
                            <small>Meeting ID yang di-generate otomatis <strong>TIDAK AKAN BEKERJA</strong> di Zoom sesungguhnya.</small><br><br>
                            <strong>ğŸ”‘ Untuk Meeting Zoom yang Valid:</strong><br>
                            <small>1. Masukkan <strong>Personal Meeting ID (PMI)</strong> Zoom Anda di field di bawah</small><br>
                            <small>2. PMI bisa didapat dari: zoom.us â†’ Profile â†’ Personal Meeting ID</small><br>
                            <small>3. Contoh PMI yang valid: <code>282 899 2827</code> atau <code>2828992827</code></small>
                        </div>
                        <h4>ğŸ† Buat Meeting Baru</h4>
                        <div class="form-group">
                            <label>Judul Meeting:</label>
                            <input type="text" id="meetingTitle" placeholder="Contoh: Kuliah Pemrograman Web - Pertemuan 1" />
                        </div>
                        <div class="form-group">
                            <label>Mata Kuliah:</label>
                            <select id="zoomMeetingMatkul">
                                <option value="">Pilih Mata Kuliah</option>
                                <option value="Pemrograman Web">Pemrograman Web</option>
                                <option value="Basis Data">Basis Data</option>
                                <option value="Algoritma dan Struktur Data">Algoritma dan Struktur Data</option>
                                <option value="Sistem Operasi">Sistem Operasi</option>
                                <option value="Jaringan Komputer">Jaringan Komputer</option>
                                <option value="Rekayasa Perangkat Lunak">Rekayasa Perangkat Lunak</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Kelas:</label>
                            <select id="zoomMeetingKelas">
                                <option value="">Pilih Kelas</option>
                                <option value="TI A">TI A</option>
                                <option value="TI B">TI B</option>
                                <option value="TI C">TI C</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Durasi (menit):</label>
                            <select id="meetingDuration">
                                <option value="60">60 menit</option>
                                <option value="90">90 menit</option>
                                <option value="120">120 menit</option>
                                <option value="150">150 menit</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><strong>Personal Meeting ID (PMI) Zoom Anda:</strong></label>
                            <input type="text" id="personalMeetingId" placeholder="Masukkan PMI Zoom Anda (contoh: 282 899 2827) - WAJIB untuk meeting yang valid!" />
                            <small class="pmi-help">âœ… Hanya PMI Zoom Anda yang akan bekerja di aplikasi Zoom!</small><br>
                            <small class="pmi-note">Kosongkan hanya untuk demo/testing (tidak akan bekerja di Zoom)</small>
                        </div>
                        <div class="meeting-actions">
                            <button class="btn btn-primary" onclick="createZoomMeeting()">ğŸš€ Buat Meeting</button>
                            <button class="btn btn-info" onclick="showZoomInstructions()">ğŸ“ Panduan Setup Zoom</button>
                            <button class="btn btn-secondary" onclick="fillExamplePMI()">ğŸ“ Contoh PMI</button>
                        </div>
                        <div id="createMeetingResult" class="result"></div>
                    </div>

                    <!-- Active Meeting -->
                    <div id="activeMeeting" class="active-meeting">
                        <h4>ğŸŸ¢ Meeting Aktif</h4>
                        <div class="meeting-details">
                            <p><strong>ğŸ¯ Meeting ID:</strong> <span id="activeMeetingId"></span></p>
                            <p><strong>ğŸ”— Join URL:</strong> <a id="activeMeetingUrl" href="#" target="_blank">Klik untuk join meeting</a></p>
                            <p><strong>ğŸ”‘ Password:</strong> <span id="activeMeetingPassword"></span></p>
                            <div class="manual-join">
                                <small><strong>ğŸ“ Cara Join Manual:</strong></small><br>
                                <small>1. Buka aplikasi Zoom</small><br>
                                <small>2. Klik "Join Meeting"</small><br>
                                <small>3. Masukkan Meeting ID: <span id="manualMeetingId"></span></small><br>
                                <small>4. Masukkan Password jika diminta</small>
                            </div>
                        </div>
                        <p><strong>ğŸ‘¥ Peserta:</strong> <span id="participantCount">0</span> orang</p>
                        <div class="meeting-controls">
                            <button class="btn btn-info" onclick="refreshParticipants()">ğŸ”„ Refresh Peserta</button>
                            <button class="btn btn-warning" onclick="copyMeetingInfo()">ğŸ“‹ Copy Info</button>
                            <button class="btn btn-danger" onclick="endZoomMeeting()">â¹ï¸ Akhiri Meeting</button>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>

    <!-- Edit Attendance Modal -->
    <div id="editAttendanceModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4>âœï¸ Edit Data Absensi</h4>
            <form id="editAttendanceForm">
                <input type="hidden" id="editAttendanceId" />
                <div class="form-group">
                    <label>Nama:</label>
                    <input type="text" id="editAttendanceName" required />
                </div>
                <div class="form-group">
                    <label>NIM:</label>
                    <input type="text" id="editAttendanceNIM" required />
                </div>
                <div class="form-group">
                    <label>Status:</label>
                    <select id="editAttendanceStatus" required>
                        <option value="hadir">Hadir</option>
                        <option value="terlambat">Terlambat</option>
                        <option value="tidak_hadir">Tidak Hadir</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Simpan</button>
                    <button type="button" onclick="closeEditAttendanceModal()" class="btn btn-secondary">âŒ Batal</button>
                </div>
            </form>
            <div id="editAttendanceResult" class="result"></div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>